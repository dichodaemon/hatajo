#!/usr/bin/python
# -*- coding: utf-8 -*-

import sys
import os

BASE_DIR = os.path.abspath( os.path.join( os.path.dirname( __file__ ), ".." ) )
path     = os.path.abspath( os.path.join( BASE_DIR, "python" ) )
if os.path.exists( path ):
  sys.path.append( path )

import hatajo
import ConfigParser
import codecs


DATA_FILE = os.path.join( BASE_DIR, "data", "database.db" )
if os.path.exists( DATA_FILE ):
  os.remove( DATA_FILE )

#-------------------------------------------------------------------------------

config = ConfigParser.SafeConfigParser()
config.readfp( codecs.open( sys.argv[1], "r", "utf-8" ) )
hatajo.db.create( config.get( "db", "url" ).strip( '"' ) )

hatajo.db.session().add( hatajo.db.CatalogEntry( "norms", "NTSC" ) )
hatajo.db.session().add( hatajo.db.CatalogEntry( "norms", "PAL" ) )
hatajo.db.session().add( hatajo.db.CatalogEntry( "norms", "SECAM" ) )
hatajo.db.session().add( hatajo.db.CatalogEntry( "norms", "iPad" ) )
hatajo.db.session().add( hatajo.db.CatalogEntry( "norms", "iPhone" ) )
hatajo.db.session().add( hatajo.db.CatalogEntry( "norms", "Archivo Digital" ) )
hatajo.db.session().add( hatajo.db.CatalogEntry( "formats", "DVD" ) )
hatajo.db.session().add( hatajo.db.CatalogEntry( "formats", "Blu-Ray" ) )
hatajo.db.session().add( hatajo.db.CatalogEntry( "ad_types", "Grande" ) )
hatajo.db.session().add( hatajo.db.CatalogEntry( "ad_types", "Chico" ) )

hatajo.db.session().commit()

